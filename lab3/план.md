# План

Мы берём систему 2 из УИР2

Наебал, пункты 3.2.* тоже надо делать

## 3.2.1 сделано в 3.3.1

## 3.2.2 В целом скип, во первых не обязаны, во вторых почти то же самое делаем в 3.3.8

## 3.2.3

Для пункта 3.2.3 нам понадобяться файлы из УИР1: [заданная трасса](../lab1/300.txt), [аппроксимирующий](../lab1/aprox.txt). Простейший поток = экспоненциальный закон. Сделал, как требуется, (простейший поток это и есть наша система 2), в папках с разными загрузками непосредственно лежат файлы с разными законами, всё подписано, всего 3*4 = 12 файлов. Сори, что не сохранил репорты, код написан, вам нужно только открыть, запустить симуляцию, проверить, что `UTIL`-загрузка равна той, которая написана в названии папки, и выписать характеристики в 12? таблиц хуй знает, сам в шоке. Вероятность потери это количество `TERMINATE zyx` разделить на количество пропускаемых заявок (100к), другие характеристики можно ниже чекнуть
для этого пункта понадобятся файлы из разных загрузок с названиями: `our system2.gps`, `система 2, аппрокс.gps`, `система 2, трасса.gps`

| Загрузка | Тип          | Среднее время ожидания | Отклонение ожидания | Среднее время пребывания | Отклонение пребывания | Вероятность потерь |
|----------|--------------|------------------------|----------------------|--------------------------|-----------------------|--------------------|
| 0.5      | Заданная     | 0.669                  | 1.390                | 1.494                    | 1.859                 | 0.13276            |
|          | Аппрокс      | 60.465                 | 140.190              | 149.400                  | 193.240               | 0.07929            |
|          | Трасса       | 64.483                 | 147.547              | 157.160                  | 202.380               | 0.08937            |
| 0.75     | Заданная     | 1.948                  | 3.158                | 3.586                    | 3.995                 | 0.34600            |
|          | Аппрокс      | 182.474                | 315.449              | 348.960                  | 401.603               | 0.26262            |
|          | Трасса       | 197.517                | 336.565              | 374.137                  | 427.893               | 0.28322            |
| 0.95     | Заданная     | 6.721                  | 8.765                | 10.896                   | 10.778                | 0.67593            |
|          | Аппрокс      | 600.400                | 797.357              | 983.257                  | 981.899               | 0.59375            |
|          | Трасса       | 664.757                | 877.467              | 1084.277                 | 1079.517              | 0.61764            |
| 0.99     | Заданная     | 15.182                 | 18.024               | 23.583                   | 22.099                | 0.83213            |
|          | Аппрокс      | 1303.033               | 1554.696             | 2032.252                 | 1904.975              | 0.77783            |
|          | Трасса       | 1372.678               | 1640.020             | 2142.328                 | 2010.571              | 0.78293            |

## 3.2.4

3.2.4: Среднее время ожидания: `TU_BUF`, среднее время пребывания: `TU_UZEL` (среднее это `mean`, естественно). Итак, мы оставляем простейший поток, потому что он не работает с файлами => симуляция быстрее + в таком случае это будет буквально наша система 2 из УИР2, если взять пункт в, то есть пункт `в` - `гиперэкспоненциальный` - это файлы `our system2.gps` с разными загрузками
пункт `а` - экспоненциальное - в файлах `exp.gps`
пункт `б` - Эрланга - в файлах `erl.gps`

| Загрузка | Распределение         | Среднее время ожидания | Отклонение ожидания | Среднее время пребывания | Отклонение пребывания | Вероятность потерь |
|----------|----------------------|------------------------|----------------------|--------------------------|-----------------------|--------------------|
| 0.5      | Экспоненциальное     | 0.480                  | 0.843                | 1.257                    | 1.146                 | 0.080588           |
|          | Эрланга              | 0.385                  | 0.618                | 1.141                    | 0.818                 | 0.055242           |
|          | Гиперэкспоненциальное| 0.663                  | 1.378                | 1.484                    | 1.849                 | 0.131869           |
| 0.75     | Экспоненциальное     | 1.424                  | 1.842                | 2.850                    | 2.328                 | 0.249748           |
|          | Эрланга              | 1.156                  | 1.313                | 2.478                    | 1.612                 | 0.191092           |
|          | Гиперэкспоненциальное| 1.944                  | 3.162                | 3.579                    | 4.003                 | 0.345408           |
| 0.95     | Экспоненциальное     | 4.786                  | 4.526                | 8.000                    | 5.553                 | 0.578419           |
|          | Эрланга              | 3.603                  | 2.796                | 6.238                    | 3.365                 | 0.485796           |
|          | Гиперэкспоненциальное| 6.763                  | 8.714                | 10.949                   | 10.723                | 0.676262           |
| 0.99     | Экспоненциальное     | 10.535                 | 8.658                | 16.615                   | 10.584                | 0.767725           |
|          | Эрланга              | 7.012                  | 4.489                | 11.327                   | 5.432                 | 0.672602           |
|          | Гиперэкспоненциальное| 15.252                 | 17.815               | 23.695                   | 21.813                | 0.832740           |

## 3.2.5

\#TODO 3.2.5. Берём модель `our system2.gps` с загрузкой 0.5 и 0.9. Возможны два варианта:

1. Оставляю эту часть на вас, вы меняете значение `E_BUF` и записываете резы, но, вероятно, загрузка системы перестанет быть ровно 0.5 или 0.95?

2. Я доделываю эту часть, меняя `E_BUF` и подбирая грёбаные `tt1` и `tt2` так, чтобы загрузка оставалась 0.5 и 0.9

Предлагаю остаться на первом варианте, тогда ничего, кроме `E_BUF` менять не нужно

ИТОГО: (или не итого, если не согласны с предложением) заходите в в папках 0.5 и 0.95 в файл `our system2.gps`, меняете там `E_BUF` и пишите, что происходит (по типу таблицы в пункте 3.3.1 или 3.3.4)

Важный пункт, увеличивать накопитель до тех пор, пока не перестанут пропадать заявки

## 3.2.6
| Загрузка | Число обслуживающих приборов | Среднее время ожидания | Среднее время пребывания |
|----------|------------------------------|------------------------|--------------------------|
| 0.5      | 2                            | 0.078                  | 0.900                    |
|          | 3                            | 0.009                  | 0.831                    |
| 0.75     | 2                            | 0.425                  | 2.059                    |
|          | 3                            | 0.092                  | 1.727                    |
| 0.95     | 2                            | 2.485                  | 6.666                    |
|          | 3                            | 1.097                  | 5.280                    |
| 0.99     | 2                            | 6.659                  | 15.074                   |
|          | 3                            | 3.763                  | 12.173                    |


## 3.3.1. (ОБЯЗАТЕЛЬНЫЙ ПУНКТ) Изменить заданную GPSS-модель (done by dro4ilka)

в соответствии с выбранной в качестве наилучшей в УИР2 системы массового обслуживания. Выполнить имитационный эксперимент при тех же нагрузочных параметрах (средних значениях и законах распределений
интервалов между поступающими заявками и длительности обслуживания), что в УИР 2. Сравнить полученные результаты с результатами, полученными в УИР 2. Результаты сравнения представить в виде таблицы, оценив в процентах степень отличия результатов имитационного моделирования от результатов расчета с помощью марковских процессов в УИР 2.

[Код](./our%20system2%20from%20lab2.gps)

|   <!-- -->       | Результаты УИР2 | Результаты GPSS| Разница, % |
|:-----------------|:---------------:|:---------------:|:----------:|
|  **Загрузка**        | 0.9653          |  0.966          | 0.07       |
|**Время ожидания**    | 2.3074          |  8.378          | 263.09     |
|**Время пребывания**  | 7.3074          |  13.381         | 83.12      |
|**Вероятность потери**| 0.5069          |  0.7246         | 42.94      |
|**Длина очереди**     | 1.617           |  1.617          |  0         |

## 3.3.2 скип

## 3.3.3 проверить, компилиться ли?

## 3.3.4 - 3.3.6 Установить начальную длительность моделирования (done by dro4ilka)

последовательно задавая в команде START (COMMAND/ START) в качестве операнда следующие значения: 10, 50, 100, 200, 300 и увеличивая далее до тех пор, пока в системе не установится стационарный (установившийся) режим.

- коэффициент загрузки СМО;
- количество потерянных заявок;
- среднее значение и среднеквадратическое отклонение времени ожидания
заявок в СМО;
- среднее значение и среднеквадратическое отклонение времени
пребывания заявок в СМО.

| Кол-во транзактов     | 10              | 50              | 100             | 200             | 400             | 1000            | 2000            | 5000            | 10000           |
|:----------------------|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|
| **Загрузка**              | 0.688           | 0.927           | 0.959           | 0.970           | 0.953           | 0.953           | 0.972           | 0.968           | 0.968           |
| **Вероятность потери**    | 0.500           | 0.840           | 0.810           | 0.705           | 0.700           | 0.742           | 0.732           | 0.714           | 0.723           |
| **Время ожидания ± СКО**  | 0.359 ± 0.880   | 11.864 ± 18.844 | 11.621 ± 13.557 | 6.960 ± 9.268   | 7.552 ± 9.870   | 8.727 ± 11.411  | 8.652 ± 11.144  | 7.968 ± 10.085  | 8.332 ± 10.692  |
| **Время пребывания ± СКО**| 1.079 ± 1.183   | 16.696 ± 23.354 | 18.390 ± 17.899 | 11.418 ± 12.154 | 12.396 ± 12.214 | 13.982 ± 13.738 | 13.829 ± 13.677 | 12.766 ± 12.395 | 13.300 ± 13.226 |

Можем заметить, что характеристики, начиная с 2000-5000 транзактов, перестают сильно отличаться от кол-ва транзактов, значит система работает в установленном режиме.

## 3.3.5 скип

## 3.3.6 скип

## 3.3.7 Изменить загрузку системы в соответствии с программой to be done by dro4ilka

### Рассмотрим систему, похожую на систему 2, но с нагрузками (0.99, 0.95, 0.75, 0.5)

#### 0.99

| Кол-во транзактов     | 10              | 50              | 100             | 200             | 400             | 1000            | 2000            | 5000            | 10000           |
|:----------------------|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|
| **Загрузка**              | 0.770           | 0.946           | 0.970           | 0.984           | 0.969           | 0.985           | 0.992           | 0.991           | 0.990           |
| **Вероятность потери**    | 0.500           | 0.880           | 0.920           | 0.875           | 0.902           | 0.817           | 0.848           | 0.835           | 0.824           |
| **Время ожидания ± СКО**  | 0.726 ± 1.752   | 6.171 ± 14.494  | 19.929 ± 31.355 | 17.653 ± 21.417 | 12.069 ± 13.974 | 16.848 ± 19.992 | 8.652 ± 11.144  | 15.544 ± 17.613 | 14.400 ± 17.212 |
| **Время пребывания ± СКО**| 1.824 ± 1.979   | 8.188 ± 15.689  | 28.250 ± 39.460 | 27.891 ± 28.252 | 19.144 ± 18.055 | 20.690 ± 18.485 | 26.110 ± 24.335 | 24.038 ± 21.653 | 22.420 ± 21.132 |

С 5-10к транзактов система входит в установившийся режим.

#### 0.95

| Кол-во транзактов     | 10              | 50              | 100             | 200             | 400             | 1000            | 2000            | 5000            | 10000           |
|:----------------------|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|
| **Загрузка**              | 0.668           | 0.921           | 0.957           | 0.908           | 0.922           | 0.957           | 0.952           | 0.945           | 0.947           |
| **Вероятность потери**    | 0.500           | 0.800           | 0.730           | 0.655           | 0.630           | 0.700           | 0.694           | 0.661           | 0.677           |
|**Время ожидания ± СКО**  | 0.273 ± 0.668   | 10.839 ± 15.138 | 8.896 ± 10.391  | 5.731 ± 7.422   | 5.726 ± 7.465   | 7.398 ± 9.637   | 7.187 ± 9.164   | 6.385 ± 8.496   | 6.756 ± 8.976   |
|**Время пребывания ± СКО**| 0.902 ± 0.989   | 18.061 ± 20.086 | 13.958 ± 13.348 | 9.339 ± 9.565   | 9.506 ± 9.239   | 11.930 ± 11.779 | 11.591 ± 11.249 | 10.351 ± 10.473 | 10.921 ± 11.085 |

Аналогично.

#### 0.75

| Кол-во транзактов     | 10              | 50              | 100             | 200             | 400             | 1000            | 2000            | 5000            | 10000           |
|:----------------------|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|
| **Загрузка**              | 0.544           | 0.774           | 0.721           | 0.759           | 0.753           | 0.763           | 0.748           | 0.756           | 0.751           |
| **Вероятность потери**    | 0.400           | 0.360           | 0.270           | 0.315           | 0.355           | 0.358           | 0.325           | 0.344           | 0.343           |
| **Время ожидания ± СКО**  | 0.005 ± 0.012   | 2.104 ± 3.308   | 1.452 ± 2.444   | 1.704 ± 2.837   | 1.990 ± 3.479   | 2.068 ± 3.293   | 1.855 ± 3.101   | 1.983 ± 3.271   | 1.959 ± 3.245   |
| **Время пребывания ± СКО**| 1.457 ± 2.728   | 3.882 ± 4.537   | 2.832 ± 3.351   | 3.228 ± 3.600   | 3.721 ± 4.320   | 3.762 ± 4.174   | 3.437 ± 3.943   | 3.620 ± 4.166   | 3.586 ± 4.109   |

Аналогично.

#### 0.5

| Кол-во транзактов     | 10              | 50              | 100             | 200             | 400             | 1000            | 2000            | 5000            | 10000           |
|:----------------------|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|:---------------:|
| **Загрузка**              | 0.536           | 0.467           | 0.466           | 0.473           | 0.500           | 0.506           | 0.487           | 0.508           | 0.501           |
| **Вероятность потери**    | 0.300           | 0.140           | 0.090           | 0.130           | 0.112           | 0.120           | 0.116           | 0.131           | 0.133           |
| **Время ожидания ± СКО**  | 0.332 ± 0.879   | 0.740 ± 1.341   | 0.499 ± 1.042   | 0.604 ± 1.237   | 0.718 ± 1.463   | 0.665 ± 1.323   | 0.623 ± 1.321   | 0.680 ± 1.433   | 0.672 ± 1.421   |
| **Время пребывания ± СКО**| 1.681 ± 2.808   | 1.537 ± 1.884   | 1.229 ± 1.510   | 1.340 ± 1.634   | 1.586 ± 1.973   | 1.485 ± 1.799   | 1.409 ± 1.772   | 1.510 ± 1.930   | 1.494 ± 1.898   |

Аналогично.

### Рассмотрим систему, похожую на систему 2, но с нагрузками (0.99, 0.95, 0.75, 0.5) и с трассой из УИР1

#### 0.99, трасса

| Кол-во транзактов     | 10               | 50              | 100             | 200             | 400                    | 1000            | 2000            | 5000            | 10000           |
|:----------------------|:----------------:|:---------------:|:---------------:|:---------------:|:----------------------:|:---------------:|:---------------:|:---------------:|:---------------:|
| **Загрузка**              | 0.879            | 0.958           |0.977            | 0.987           | 0.994                  | 0.992           | 0.993           | 0.990           | 0.989           |
| **Вероятность потери**    | 0.500            | 0.840           | 0.870           | 0.780          | 0.748                   | 0.777           | 0.789           | 0.775           | 0.776           |
| **Время ожидания ± СКО**  |48.554 ± 102.389|1769.749 ± 2823.569|1872.794 ± 2441.164|1294.216 ± 1615.289|1090.686 ± 1274.567 |1320.430 ± 1631.078|1412.657 ± 1747.196|1324.342 ± 1586.760|1321.586 ± 1634.801|
| **Время пребывания ± СКО**|170.939 ± 177.329|2510.329 ± 3503.603|3103.238 ± 3273.932|2024.877 ± 2069.666|1728.091 ± 1612.354|2074.157 ± 1954.266|2204.648 ± 2128.295|2067.202 ± 1943.981|2067.467 ± 2028.821|

Аналогично.

#### 0.95, трасса

| Кол-во транзактов     | 10               | 50              | 100             | 200             | 400               | 1000             | 2000             | 5000            | 10000           |
|:----------------------|:----------------:|:---------------:|:---------------:|:---------------:|:-----------------:|:----------------:|:----------------:|:---------------:|:---------------:|
| **Загрузка**              | 0.832            | 0.942           |0.936            | 0.932           | 0.942             | 0.954            | 0.947            | 0.946           | 0.952           |
|**Вероятность потери** | 0.400            | 0.740           | 0.650           | 0.575           | 0.593             | 0.648            | 0.625            | 0.611           | 0.623           |
|**Время ожидания ± СКО**|242.321 ± 621.946|985.251 ± 1295.352|708.384 ± 949.543|512.923 ± 684.522|589.580 ± 765.452  |721.461 ± 970.642 |674.036 ± 880.189 |640.534 ± 873.482|675.991 ± 924.812|
|**Время пребывания ± СКО**|383.080 ± 720.311|1668.638 ± 1762.340|1148.338 ± 1231.4812|867.858 ± 873.063|977.929 ± 933.473|1167.690 ± 1183.495|1097.722 ± 1079.635|1049.850 ± 1075.395|1101.944 ± 1145.009|

#### 0.75, трасса

| Кол-во транзактов     | 10               | 50              | 100             | 200             | 400               | 1000             | 2000             | 5000            | 10000           |
|:----------------------|:----------------:|:---------------:|:---------------:|:---------------:|:-----------------:|:----------------:|:----------------:|:---------------:|:---------------:|
| **Загрузка**          | 0.727            | 0.752           | 0.724           | 0.726           | 0.772             | 0.758            | 0.736            | 0.746           | 0.746           |
|**Вероятность потери** | 0.200            | 0.220           | 0.200           | 0.255           | 0.302             | 0.282            | 0.264            | 0.293           | 0.282           |
|**Время ожидания ± СКО**|244.667 ± 505.679|185.495 ± 317.656|150.757 ± 244.488|172.104 ± 292.557|204.589 ± 362.539  |195.587 ± 328.180 |181.499 ± 320.757 |202.147 ± 356.197|195.915 ± 341.874|
|**Время пребывания ± СКО**|498.200 ± 682.452|361.583 ± 452.080|299.276 ± 340.098|330.534 ± 380.090|390.214 ± 460.942|373.530 ± 421.765 |349.948 ± 410.183 |380.033 ± 456.163|371.149 ± 436.854|

## 3?

\#TODO просто прочитать.

В чём прикол пунктов 3.3.\*? По логике, нам сначала надо выполнить пункты 3.3.\* для всех законов (3) для всех загрузок (4), итого 12. То есть для всех 12 видов систем узнать, как долго они входят в установившийся режим, сколько заявок нужно, чтобы данные о системе были достоверными, по сути. Но для достоверности и удобства я сначала ебанул пункты 3.2.\*, везде поставив 100к (хотя в примере выше, при 10к уже почти нет изменений в загрузке системы)

Почти весь код, необходимый для таблиц/графиков уже написан, не считая 3.2.5 и 3.2.6

## 4.*


### 4.4

На лекциях были формулы для неограниченной емкости буфера. Поэтому увеличил емкость буфера до 40, чтобы не было потерь.

| Тип    | Способ      | Загрузка | Среднее время ожидания | Среднее время пребывания | Средняя длина очереди |
|--------|-------------|----------|-------------------------|--------------------------|------------------------|
| M/M/1  | Модель  | 0.544 | 0.925  | 1.702 | 0.648 |
|        | Формула | 0.544 | 0.928  | 1.706 | 0.649 |
| M/G/1  | Модель  | 0.529 | 0.637  | 1.393 | 0.447 |
|        | Формула | 0.529 | 0.635  | 1.390 | 0.445 |



\#TODO почти всё, что нужно в отчёте, будет сделано при выполнении (до пизды таблиц, графики из них хз какие), но нужно пункт 4.5 посчитать ручками и сделать вывод
